{"ast":null,"code":"import { createSelector } from 'reselect';\nconst tokens = state => state.tokens.contracts;\nconst swaps = state => state.amm.swaps;\nexport const chartSelector = createSelector(swaps, tokens, (swaps, tokens) => {\n  if (!tokens[0] || !tokens[1]) {\n    return;\n  }\n\n  // Filter swaps by selected tokens\n  swaps = swaps.filter(s => s.args.tokenGet === tokens[0].address || s.args.tokenGet === tokens[1].address);\n  swaps = swaps.filter(s => s.args.tokenGive === tokens[0].address || s.args.tokenGive === tokens[1].address);\n\n  // Sort swaps by date ascending to compare history\n  swaps = swaps.sort((a, b) => a.args.timestamp - b.args.timestamp);\n\n  // Decorate swaps - add display attributes\n  swaps = swaps.map(s => decorateSwap(s));\n\n  // Fetch prices\n  const prices = swaps.map(s => s.rate);\n  swaps = swaps.sort((a, b) => b.args.timestamp - a.args.timestamp);\n  return {\n    swaps: swaps,\n    series: [{\n      name: \"Rate\",\n      data: prices\n    }]\n  };\n});\nconst decorateSwap = swap => {\n  // Calculate token price to 5 decimal places\n  const precision = 100000;\n  let rate = swap.args.token2Balance / swap.args.token1Balance;\n  rate = Math.round(rate * precision) / precision;\n  return {\n    ...swap,\n    rate\n  };\n};","map":{"version":3,"names":["createSelector","tokens","state","contracts","swaps","amm","chartSelector","filter","s","args","tokenGet","address","tokenGive","sort","a","b","timestamp","map","decorateSwap","prices","rate","series","name","data","swap","precision","token2Balance","token1Balance","Math","round"],"sources":["/Users/nicholasmakdessi/Desktop/Blockchain/Mentorship/capstone/aggregator/src/store/selectors.js"],"sourcesContent":["import { createSelector } from 'reselect'\n\nconst tokens = state => state.tokens.contracts\nconst swaps = state => state.amm.swaps\n\nexport const chartSelector = createSelector(swaps, tokens, (swaps, tokens) => {\n  if (!tokens[0] || !tokens[1]) { return }\n\n  // Filter swaps by selected tokens\n  swaps = swaps.filter((s) => s.args.tokenGet === tokens[0].address || s.args.tokenGet === tokens[1].address)\n  swaps = swaps.filter((s) => s.args.tokenGive === tokens[0].address || s.args.tokenGive === tokens[1].address)\n\n  // Sort swaps by date ascending to compare history\n  swaps = swaps.sort((a, b) => a.args.timestamp - b.args.timestamp)\n\n  // Decorate swaps - add display attributes\n  swaps = swaps.map((s) => decorateSwap(s))\n\n  // Fetch prices\n  const prices = swaps.map(s => s.rate)\n\n  swaps = swaps.sort((a, b) => b.args.timestamp - a.args.timestamp)\n\n  return({\n    swaps: swaps,\n    series: [{\n      name: \"Rate\",\n      data: prices\n    }]\n  })\n})\n\nconst decorateSwap = (swap) => {\n  // Calculate token price to 5 decimal places\n  const precision = 100000\n\n  let rate = (swap.args.token2Balance / swap.args.token1Balance)\n\n  rate = Math.round(rate * precision) / precision\n\n  return({\n    ...swap,\n    rate\n  })\n}"],"mappings":"AAAA,SAASA,cAAc,QAAQ,UAAU;AAEzC,MAAMC,MAAM,GAAGC,KAAK,IAAIA,KAAK,CAACD,MAAM,CAACE,SAAS;AAC9C,MAAMC,KAAK,GAAGF,KAAK,IAAIA,KAAK,CAACG,GAAG,CAACD,KAAK;AAEtC,OAAO,MAAME,aAAa,GAAGN,cAAc,CAACI,KAAK,EAAEH,MAAM,EAAE,CAACG,KAAK,EAAEH,MAAM,KAAK;EAC5E,IAAI,CAACA,MAAM,CAAC,CAAC,CAAC,IAAI,CAACA,MAAM,CAAC,CAAC,CAAC,EAAE;IAAE;EAAO;;EAEvC;EACAG,KAAK,GAAGA,KAAK,CAACG,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,CAACC,QAAQ,KAAKT,MAAM,CAAC,CAAC,CAAC,CAACU,OAAO,IAAIH,CAAC,CAACC,IAAI,CAACC,QAAQ,KAAKT,MAAM,CAAC,CAAC,CAAC,CAACU,OAAO,CAAC;EAC3GP,KAAK,GAAGA,KAAK,CAACG,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,CAACG,SAAS,KAAKX,MAAM,CAAC,CAAC,CAAC,CAACU,OAAO,IAAIH,CAAC,CAACC,IAAI,CAACG,SAAS,KAAKX,MAAM,CAAC,CAAC,CAAC,CAACU,OAAO,CAAC;;EAE7G;EACAP,KAAK,GAAGA,KAAK,CAACS,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACL,IAAI,CAACO,SAAS,GAAGD,CAAC,CAACN,IAAI,CAACO,SAAS,CAAC;;EAEjE;EACAZ,KAAK,GAAGA,KAAK,CAACa,GAAG,CAAET,CAAC,IAAKU,YAAY,CAACV,CAAC,CAAC,CAAC;;EAEzC;EACA,MAAMW,MAAM,GAAGf,KAAK,CAACa,GAAG,CAACT,CAAC,IAAIA,CAAC,CAACY,IAAI,CAAC;EAErChB,KAAK,GAAGA,KAAK,CAACS,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACN,IAAI,CAACO,SAAS,GAAGF,CAAC,CAACL,IAAI,CAACO,SAAS,CAAC;EAEjE,OAAO;IACLZ,KAAK,EAAEA,KAAK;IACZiB,MAAM,EAAE,CAAC;MACPC,IAAI,EAAE,MAAM;MACZC,IAAI,EAAEJ;IACR,CAAC;EACH,CAAC;AACH,CAAC,CAAC;AAEF,MAAMD,YAAY,GAAIM,IAAI,IAAK;EAC7B;EACA,MAAMC,SAAS,GAAG,MAAM;EAExB,IAAIL,IAAI,GAAII,IAAI,CAACf,IAAI,CAACiB,aAAa,GAAGF,IAAI,CAACf,IAAI,CAACkB,aAAc;EAE9DP,IAAI,GAAGQ,IAAI,CAACC,KAAK,CAACT,IAAI,GAAGK,SAAS,CAAC,GAAGA,SAAS;EAE/C,OAAO;IACL,GAAGD,IAAI;IACPJ;EACF,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}